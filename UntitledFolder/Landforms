/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var table = ee.FeatureCollection("projects/ee-resilience/assets/Landforms_Assets/lm_bioma_250"),
    bioma = ee.FeatureCollection("projects/ee-lucasljardim9/assets/wwf_cerrado");
/***** End of imports. If edited, may not auto-convert in the playground. *****/
/**
 * This script generates and exports to Google Drive a raster of landform varieties at a scale of ~ 90 m for a biome.  
*/

/* Steps to calculate landform variety

1- Calculate relief slopes, aspects and Topographic Position Index (TPI) from a Digital Elevation Model.

2- Calculate a moisture index from a flow accumulation raster and slopes.

3- Transform slopes, aspect, TPI and moisture index into classes

4- Combine slopes, aspect, TPI and moisture classes into a code string

5- Re-classify landform string into landform types

6- Count the number of distinct landforms within a focal cell kernel (landform variety)

7- Export landform variety raster

*/

/*
First, we import a shapefile of brazilian biomes from IBGE (2018) and filter a biome to mask the rasters.
*/
// It is required to use bioma bounds instead the whole polygons because the feature complexity 
// inhibits the image exportation.

/*
var table = ee.FeatureCollection("projects/ee-resilience/assets/Landforms_Assets/lm_bioma_250")
                       .select("Bioma")
                       .filter(ee.Filter.eq("Bioma", "Amaz√¥nia"))
                       .map(function(feature){
                         return feature.bounds()
                        })
                       .geometry();
*/
