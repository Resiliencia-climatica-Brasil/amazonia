var table = ee.FeatureCollection("projects/ee-lucasljardim9/assets/Biome")
                        .map(function(feature){
                             return feature.bounds()
                             })
                        .geometry()
                        .dissolve({'maxError': 1})
                        .bounds();



var brasil_raster = ee.Image("projects/ee-lucasljardim9/assets/brasil_raster");

var Z_elev_orig    = ee.Image('projects/ee-lucasljardim9/assets/Z-Scores_elevation_range').updateMask(brasil_raster);
var Z_land_orig   = ee.Image('projects/ee-lucasljardim9/assets/Z-Scores_landforms').updateMask(brasil_raster);
var Z_soil_orig   = ee.Image('projects/ee-lucasljardim9/assets/Z-Scores_soil_diversity').updateMask(brasil_raster);
var Z_wet_orig   = ee.Image('projects/ee-lucasljardim9/assets/Z-Scores_wetlands').updateMask(brasil_raster);

var Z_elev_3 = ee.Image("projects/ee-resilience/assets/EXPORT/Z-Scores_elevation_range").updateMask(brasil_raster);
var Z_land_3 = ee.Image("projects/ee-resilience/assets/EXPORT/Z-Scores_landforms").updateMask(brasil_raster);
var Z_soil_3 = ee.Image("projects/ee-resilience/assets/EXPORT/Z-Scores_soil_diversity").updateMask(brasil_raster);
var Z_wet_3 = ee.Image("projects/ee-resilience/assets/EXPORT/Z-Scores_wetlands").updateMask(brasil_raster);

var scale = Z_elev_orig.projection().nominalScale();

/*
Map.addLayer(Z_elev_orig.subtract(Z_elev_3), {}, 'Z elev orig - Z 3.5');
Map.addLayer(Z_land_orig.subtract(Z_land_3), {}, 'Z land orig - Z 3.5');
Map.addLayer(Z_soil_orig.subtract(Z_soil_3), {}, 'Z soil orig - Z 3.5');
Map.addLayer(Z_wet_orig.subtract(Z_wet_3), {}, 'Z wet orig - Z 3.5');

var histogram = ui.Chart.image.histogram(({
  image: Z_elev_orig,
  scale: scale,
  maxPixels: 1e13}))
  .setOptions({
    title: 'Histogram of Pixel Values Z_elev' ,
    hAxis: {title: 'Pixel Value'},
    vAxis: {title: 'Count'},
    legend: 'none'
  });
  
  print(histogram)
  
  var histogram = ui.Chart.image.histogram(({
  image: Z_elev_orig.subtract(Z_elev_3),
  scale: scale,
  maxPixels: 1e13}))
  .setOptions({
    title: 'Histogram of Pixel Values Z_elev-3.5' ,
    hAxis: {title: 'Pixel Value'},
    vAxis: {title: 'Count'},
    legend: 'none'
  });
  
  print(histogram)

*/  
var pixels = 1e5


// Sample the same pixels from both raster images
var sampledPixels = Z_elev_orig.sample({
  region: table,
  scale: scale,
  numPixels: pixels, // Adjust the number of pixels to sample as needed
  seed: 1234 // Set a seed for reproducibility
});

var sampledPixels2 = Z_elev_3.sample({
  region: table,
  scale: scale,
  numPixels: pixels, // Adjust the number of pixels to sample as needed
  seed: 1234 // Set a seed for reproducibility
});


// Get the Z score values of the sampled pixels as lists
var zScoreListX = sampledPixels.aggregate_array('z'); // Replace 'band_name_of_Z_score_X' with the actual band name of the Z score raster for X
var zScoreListY = sampledPixels2.aggregate_array('z'); // Replace 'band_name_of_Z_score_Y' with the actual band name of the Z score raster for Y

// Create a scatter plot chart
var chart = ui.Chart.array.values({
  array: zScoreListX,
  axis: 0,
  xLabels: zScoreListY
}).setChartType('ScatterChart')
  .setOptions({
    title: 'Scatterplot of Z scores for X and Y',
    hAxis: {title: 'Z scores for X'},
    vAxis: {title: 'Z scores for Y'}
});

// Display the chart
print(chart);
